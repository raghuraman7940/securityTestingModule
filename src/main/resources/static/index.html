<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>HCL Testing Dashboard</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/index.css" rel="stylesheet">
    

    <link href="fonts/css/font-awesome.min.css" rel="stylesheet">
    <link href="css/animate.min.css" rel="stylesheet">

    <!-- Custom styling plus plugins -->
    <link href="css/custom.css" rel="stylesheet">
    <link href="css/icheck/flat/green.css" rel="stylesheet">

    <!--c3js css-->
    <link href="css/c3js/c3.min.css" rel="stylesheet">

    <script src="js/jquery.min.js"></script>
    

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>


<body class="nav-md">

<div class="container body">


    <div class="main_container">

        <div class="col-md-3 left_col">
            <div class="left_col scroll-view">
                <img src="images/hcl.png" class="img-circle profile_img">

                <div class="navbar nav_title" style="border: 0;">
                    <a href="/" class="site_title">
                        <span>Automation Testing Framework</span></a>
                </div>
                <div class="clearfix"></div>

                <!-- menu prile quick info -->
                <div class="profile">
                    <div class="profile_pic">
                        <img src="images/acc.png" alt="..." class="img-circle profile_img">
                    </div>
                    <div class="profile_info">
                        <span>Welcome,</span>

                        <h2>Guest User</h2>
                    </div>
                </div>
                <!-- /menu prile quick info -->

                <br/>

                <!-- sidebar menu -->
                <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
                    <div class="menu_section">
                        <h3>&nbsp;</h3>
                        <ul class="nav side-menu">
                            <li class="active"><a><i class="fa fa-line-chart"></i> Dashboard
                                <span class="fa fa-chevron-down"></span></a>
                                <ul class="nav child_menu" style="display: none">
                                    <li><a href="/" class="current-page">Real-time</a>
                                    </li>
                                </ul>
                            </li>
                            <li><a><i class="fa fa-table"></i> Reports <span class="fa fa-chevron-down"></span></a>
                                <ul class="nav child_menu" style="display: none">
                                    <li><a href="#">selenium Reports</a>
                                    </li>
                                    <li><a href="#">Actions</a>
                                    </li>
                                </ul>
                            </li>
                           
                        </ul>
                    </div>
                </div>
                <!-- /sidebar menu -->
            </div>
        </div>
	
        <!-- top navigation -->
        <div class="top_nav">

            <div class="nav_menu">
               <nav class="" role="navigation">
               <!--       <div class="nav toggle">
                        <a id="menu_toggle"><i class="fa fa-bars"></i></a>
                    </div> -->

                    <ul class="nav navbar-nav navbar-right">
                        <li class="">
                            <a href="javascript:;" class="user-profile dropdown-toggle" data-toggle="dropdown"
                               aria-expanded="false">
                                <img src="images/acc.png" alt="">Test User
                                <span class=" fa fa-angle-down"></span>
                            </a>
                            <ul class="dropdown-menu dropdown-usermenu animated fadeInDown pull-right">
                                <li><a href="javascript:;"> Profile</a>
                                </li>
                                <li><a href="login.html"><i class="fa fa-sign-out pull-right"></i> Log Out</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </nav>
            </div>

        </div> 
       
        <!-- /top navigation -->
 
        <!-- page content -->
        <div class="right_col" role="main">
            <button class="accordion">Security Testing</button>
       	    <div class="panel">
                <!-- <div id="loading">        
                    <img id="loading-image" src="images/loading.gif" alt="Loading..." />  -->
                    <div class="row">
                        <div class="col-md-12">
                            <div class="">
                            <div class="x_content">
                                <div class="row">
                                    <div  class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12" onclick="GetZappconfig()">
                                        <div class="tile-stats">
                                            <div class="icon" ><i  class="fa fa-cogs" style="font-size:36px"></i>
                                            </div>
                                            <div class="count" >&nbsp;</div>
                                            <!-- <button class="accordion">Configure</button> -->
                                            <h3 align="center">Configure</h3>
                                            <!-- <a onclick="myFunction()"><h3 align="center">Configure</h3></a> -->
                                        </div>
                                    </div>
                                    <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12" onclick="StartZapScan()">
                                    <div class="tile-stats">
                                        <div class="icon"><i class="fa fa-caret-square-o-right" style="font-size:36px" align="center"></i>
                                        </div>
                                        <div class="count" >&nbsp;</div>
                                        <h3 align="center">Start security Scan</h3>
                                    </div>
                                    </div>
                                    <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12"  onclick="GetReports()">
                                        <div class="tile-stats">
                                            <div class="icon"><i class="fa fa-file-excel-o" style="font-size:36px"></i>
                                            </div>
                                            <div class="count">&nbsp;</div>
                                            <h3 align="center">Reports</h3>
                                        </div>
                                    </div>
                                    <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                        <div class="tile-stats">
                                            <div class="icon"><i class="fa fa-question-circle" style="font-size:36px"></i>
                                            </div>
                                            <div class="count" id="total-refunded-items">&nbsp;</div>
                                            <h3 align="center">Help</h3>
                                        </div>
                                    </div>
                                </div>
                                <div id="myDIV" class="panel">
                                    <div class="container">
                                        <h1 align="center">Configure ZAP Proxy Details</h1>
                                        <hr>
                                        <div id="SavedMsg" class="panel" style="display:none">
                                            <p class="SuccessMsg" id="SavedConfigMsg"  align="center"></p>
                                        </div>
                                        <label for="hostname"><b>ZAP Hostname</b></label>
                                        <input type="text" placeholder="Enter Hostname"  id="hostname" name="hostname" required>
                                        <label for="port"><b>ZAP Port Number</b></label>
                                        <input type="text" placeholder="Enter Port Number" id="port" name="port" required>
                                        <label for="ApiKey"><b>ZAP Api Key</b></label>
                                        <input type="text" placeholder="Enter ApiKey" id="ApiKey" name="ApiKey" required>
                                        <hr>
                                     
                                        <button style="width:50%"  onclick="SaveConfig()" class="registerbtn" type="submit"  >Save</button>
                                        <button style="width:50%" type="submit" class="LaunchZapbtn"  onclick="LaunchZap()">Launch ZAP</button>
                           
                                    </div>
                                </div>
                                <div id="StartScanDiv" class="panel">
                                        <div class="container">
                                            <h1 align="center">Start ZAP Proxy Scan</h1>
                                            <hr>
                                            <div id="ScannedMsg" class="panel" style="display:none">
                                                <p class="SuccessMsg1" id="ScannedMsgText" align="center"></p>
                                                <p class="ErrorMsg" id="ErrorMsgText" align="center"></p>
                                            </div>
                                            <label for="target Application"><b>Targeted Websites :</b></label>
                                            <input type="text" placeholder="Enter Targeted Website"  id="TargetedWebsites" name="TargetedWebsites" required>
                                            
                                              <label for="ZAP Scan Modes"><b>ZAP Scan Modes :</b></label>
                                              <label class="container">Spider
                                                  <input checked="checked"  type="radio"  id="spiderradio" name="radio">
                                                <span class="checkmark"></span>
                                              </label>
                                              <label class="container">Active Scan<input type="radio" id="ascanradio" name="radio">
                                                <span class="checkmark"></span>
                                              </label>
                                              <label class="container">Ajax Spider<input type="radio" id="ajspiderradio" disabled="true" name="radio">
                                                <span class="checkmark"></span>
                                              </label>
                                              <label class="container">Selenium<input type="radio" id="selenradio" name="radio">
                                                <span class="checkmark"></span>
                                              </label>

                                            <hr>
                                            <button style="width:50%"  onclick="StartScan()" type="submit"  >Start Scan</button>
                                            
                                        </div>
                                </div>
                                <div id="ReportDisplay" class="panel">
                                        <div class="container">
                                            <h1 align="center">ZAP Scanning Report</h1>
                                            <hr>
                                            <!-- <label for="target Application"><b>Targeted Websites</b></label>
                                            <input type="text" placeholder="Enter Targeted Website"  id="ReportTargeted" name="ReportTargeted" required>
                                            <button style="width:50%"  onclick="GetReports()" type="submit"  >Generate Report</button> -->
                                            <p id="zapReports"></p>
                                            <hr>
                                        </div>
                                </div>
                                <div id="loading" style="display:none">  
                                        <img id="loading-image" src="images/ajax-loader.gif" alt="Loading..." /> 
                                </div>
                                
                        </div>
                    </div>
                </div>
                
            </div>
        
            <div class="clearfix"></div>
            
            <div class="clearfix"></div>

           
          

            <!-- footer content -->
        <!--     <footer>
                <div class="">
                    <p class="pull-right"><span class="lead"><i class="fa fa-line-chart"></i>HCL</span>
                    </p>
                </div>
                <div class="clearfix"></div>
            </footer>  -->
            <!-- /footer content -->
		</div>
		<button class="accordion">Funtional Testing</button>
       	 <div class="panel">
            <div class="row">
                <div class="col-md-12">
                    <div class="">
                        <div class="x_content">
                            <div class="row">
                                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                    <div class="tile-stats">
                                        <div class="icon"><i class="fa fa-caret-square-o-right" style="font-size:36px"></i>
                                        </div>
                                        <div class="count" id="launch_zap">&nbsp;</div>

                                        <h3 align="center">Start Selenium</h3>
                                    </div>
                                </div>
                                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                    <div class="tile-stats">
                                        <div class="icon"><i class="fa fa-cogs" style="font-size:36px"></i>
                                        </div>
                                        <div class="count" id="trigger_selenium">&nbsp;</div>
                                        <h3>Configure Test</h3>
                                    </div>
                                </div>
                                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                    <div class="tile-stats">
                                        <div class="icon"><i class="fa fa-minus-square"></i>
                                        </div>
                                        <div class="count" id="total-refund">&nbsp;</div>
                                        <a href="/reports"><h3>Reports</h3></a>

                                        
                                    </div>
                                </div>
                                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                    <div class="tile-stats">
                                        <div class="icon"><i class="fa fa-arrow-circle-down"></i>
                                        </div>
                                        <div class="count" id="total-refunded-items">&nbsp;</div>

                                        <h3>Help</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>
            
            <div class="clearfix"></div>

           

            <!-- footer content -->
        <!--     <footer>
                <div class="">
                    <p class="pull-right"><span class="lead"><i class="fa fa-line-chart"></i>HCL</span>
                    </p>
                </div>
                <div class="clearfix"></div>
            </footer>  -->
            <!-- /footer content -->
		</div>
		<button class="accordion">Mobile Testing</button>
       	 <div class="panel">
            <div class="row">
                <div class="col-md-12">
                    <div class="">
                        <div class="x_content">
                            <div class="row">
                                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                    <div class="tile-stats">
                                        <div class="icon"><i class="fa fa-plus-square"></i>
                                        </div>
                                        <div class="count" id="launch_zap">&nbsp;</div>

                                        <h3>Launch Zap</h3>
                                    </div>
                                </div>
                                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                    <div class="tile-stats">
                                        <div class="icon"><i class="fa fa-arrow-circle-up"></i>
                                        </div>
                                        <div class="count" id="trigger_selenium">&nbsp;</div>

                                        <h3># Trigger selenium</h3>
                                    </div>
                                </div>
                                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                    <div class="tile-stats">
                                        <div class="icon"><i class="fa fa-minus-square"></i>
                                        </div>
                                        <div class="count" id="total-refund">&nbsp;</div>
                                        <a href="/reports"><h3>Reports</h3></a>

                                        
                                    </div>
                                </div>
                                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                    <div class="tile-stats">
                                        <div class="icon"><i class="fa fa-arrow-circle-down"></i>
                                        </div>
                                        <div class="count" id="total-refunded-items">&nbsp;</div>

                                        <h3># Stats</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>
            
            <div class="clearfix"></div>

           

            <!-- footer content -->
        <!--     <footer>
                <div class="">
                    <p class="pull-right"><span class="lead"><i class="fa fa-line-chart"></i>HCL</span>
                    </p>
                </div>
                <div class="clearfix"></div>
            </footer>  -->
            <!-- /footer content -->
		</div>
		<button class="accordion">API Testing</button>
       	 <div class="panel">
            <div class="row">
                <div class="col-md-12">
                    <div class="">
                        <div class="x_content">
                            <div class="row">
                                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                    <div class="tile-stats">
                                        <div class="icon"><i class="fa fa-plus-square"></i>
                                        </div>
                                        <div class="count" id="launch_zap">&nbsp;</div>

                                        <h3>Launch Zap</h3>
                                    </div>
                                </div>
                                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                    <div class="tile-stats">
                                        <div class="icon"><i class="fa fa-arrow-circle-up"></i>
                                        </div>
                                        <div class="count" id="trigger_selenium">&nbsp;</div>

                                        <h3># Trigger selenium</h3>
                                    </div>
                                </div>
                                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                    <div class="tile-stats">
                                        <div class="icon"><i class="fa fa-minus-square"></i>
                                        </div>
                                        <div class="count" id="total-refund">&nbsp;</div>
                                        <a href="/reports"><h3>Reports</h3></a>

                                        
                                    </div>
                                </div>
                                <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                    <div class="tile-stats">
                                        <div class="icon"><i class="fa fa-arrow-circle-down"></i>
                                        </div>
                                        <div class="count" id="total-refunded-items">&nbsp;</div>

                                        <h3># Stats</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>
            
            <div class="clearfix"></div>

           

            <!-- footer content -->
        <!--     <footer>
                <div class="">
                    <p class="pull-right"><span class="lead"><i class="fa fa-line-chart"></i>HCL</span>
                    </p>
                </div>
                <div class="clearfix"></div>
            </footer>  -->
            <!-- /footer content -->
		</div>
        </div>
        <!-- /page content -->
    </div>

</div>

<div id="custom_notifications" class="custom-notifications dsp_none">
    <ul class="list-unstyled notifications clearfix" data-tabbed_notifications="notif-group">
    </ul>
    <div class="clearfix"></div>
    <div id="notif-group" class="tabbed_notifications"></div>
</div>

<script src="js/bootstrap.min.js"></script>

<!-- chart js -->
<script src="js/chartjs/chart.min.js"></script>

<!--c3 js-->
<script src="js/c3js/d3.min.js"></script>
<script src="js/c3js/c3.min.js"></script>

<!-- bootstrap progress js -->
<script src="js/progressbar/bootstrap-progressbar.min.js"></script>
<script src="js/nicescroll/jquery.nicescroll.min.js"></script>
<!-- icheck -->
<script src="js/icheck/icheck.min.js"></script>

<script src="js/custom.js"></script>

<!-- PNotify -->
<script type="text/javascript" src="js/notify/pnotify.core.js"></script>
<script type="text/javascript" src="js/notify/pnotify.buttons.js"></script>
<script type="text/javascript" src="js/notify/pnotify.nonblock.js"></script>

<script>
    $(function () {
        var cnt = 10; //$("#custom_notifications ul.notifications li").length + 1;
        TabbedNotification = function (options) {
            var message = "<div id='ntf" + cnt + "' class='text alert-" + options.type + "' style='display:none'><h2><i class='fa fa-bell'></i> " + options.title + "</h2><div class='close'><a href='javascript:;' class='notification_close'><i class='fa fa-close'></i></a></div><p>" + options.text + "</p></div>";

            if (document.getElementById('custom_notifications') == null) {
                alert('doesnt exists');
            } else {
                $('#custom_notifications ul.notifications').append("<li><a id='ntlink" + cnt + "' class='alert-" + options.type + "' href='#ntf" + cnt + "'><i class='fa fa-bell animated shake'></i></a></li>");
                $('#custom_notifications #notif-group').append(message);
                cnt++;
                CustomTabs(options);
            }
        };

        CustomTabs = function (options) {
            $('.tabbed_notifications > div').hide();
            $('.tabbed_notifications > div:first-of-type').show();
            $('#custom_notifications').removeClass('dsp_none');
            $('.notifications a').click(function (e) {
                e.preventDefault();
                var $this = $(this),
                        tabbed_notifications = '#' + $this.parents('.notifications').data('tabbed_notifications'),
                        others = $this.closest('li').siblings().children('a'),
                        target = $this.attr('href');
                others.removeClass('active');
                $this.addClass('active');
                $(tabbed_notifications).children('div').hide();
                $(target).show();
            });
        };

        CustomTabs();

        var tabid = idname = '';
        $(document).on('click', '.notification_close', function (e) {
            idname = $(this).parent().parent().attr("id");
            tabid = idname.substr(-2);
            $('#ntf' + tabid).remove();
            $('#ntlink' + tabid).parent().remove();
            $('.notifications a').first().addClass('active');
            $('#notif-group div').first().css('display', 'block');
        });
    })

//     $(window).load(function() {
//      $('#loading').hide();
//   });
    var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
    acc[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var panel = this.nextElementSibling;
        if (panel.style.display === "block") {
            panel.style.display = "none";
        } else {
            panel.style.display = "block";
        }
    });
}

// Get the modal
var modal = document.getElementById('id01');

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}
function GetZappconfig() {
    var x = document.getElementById("myDIV");
    var y = document.getElementById("StartScanDiv");
    var z = document.getElementById("ReportDisplay");
    var ScanMsg= document.getElementById('ScannedMsg');
    if (x.style.display === "block") {
        x.style.display = "none";
        ScanMsg.style.display= "none";
    } else {
        x.style.display = "block";
        y.style.display = "none";
        z.style.display = "none";
        ScanMsg.style.display= "none";
        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", "/api/zapconfig", true);
        xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4 && xhttp.status == 200) {
                var jsobj =JSON.parse(xhttp.responseText);
                //alert("zaphostname: " + jsobj.zaphostname + "\zapport: " + jsobj.zapport);
                document.getElementById("hostname").value = jsobj.zaphostname;
                document.getElementById("port").value = jsobj.zapport 
                document.getElementById("ApiKey").value = jsobj.zapapikey 
        }
        else{
           // alert("Error Ready State and Status : " +xhttp.readyState+" : "+xhttp.status); 
        }
        };
        xhttp.setRequestHeader("Content-type", "application/json");
        xhttp.send();

    }
}

function StartZapScan() {
    var x = document.getElementById("StartScanDiv");
    var y = document.getElementById("myDIV");
    var z = document.getElementById("ReportDisplay");
    var ScanMsg= document.getElementById('ScannedMsg');
    var loadspin= document.getElementById('loading');

    if (x.style.display === "block") {
        x.style.display = "none";
    } else {
        x.style.display = "none"
        y.style.display = "none";
        z.style.display = "none";
        ScanMsg.style.display= "none";
        loadspin.style.display = 'block';
        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", "/api/getzapoptions", true);
        xhttp.onreadystatechange = function() {
            if (xhttp.readyState == 4 && xhttp.status == 200) {
                var jsobj =JSON.parse(xhttp.responseText);
                loadspin.style.display = 'none';
                x.style.display = "block";
                document.getElementById("ScannedMsgText").innerHTML = "Zap Proxy Server Running Now";
                document.getElementById("ScannedMsgText").style.display='block'
                document.getElementById("ErrorMsgText").style.display='none'
                ScanMsg.style.display='block';
            }
            else if (xhttp.readyState == 4 && xhttp.status == 500) {
                loadspin.style.display = 'none';
                x.style.display = "block";
                document.getElementById("ScannedMsgText").style.display='none'
                document.getElementById("ErrorMsgText").innerHTML = "Zap Proxy Server not started. Please configure Zap Proxy details and launch the ZAP in Configure Tab";
                document.getElementById("ErrorMsgText").style.display='block'
                ScanMsg.style.display='block';
            }
            else{
                // loadspin.style.display = 'none';
                // x.style.display = "block";
                // document.getElementById("ScannedMsgText").style.display='none'
                // document.getElementById("ErrorMsgText").style.display='block'
                // document.getElementById("ErrorMsgText").innerHTML = "Zap Proxy Server not Started and Launch the ZAP in Configure Tab";
                // ScanMsg.style.display='block';
                // alert("Error Ready State and Status : " +xhttp.readyState+" : "+xhttp.status); 
            }
        };
        xhttp.setRequestHeader("Content-type", "application/json");
        xhttp.send();

    }
}

function DisplayReportsWindow() {
    var x = document.getElementById("ReportDisplay");
    if (x.style.display === "block") {
        x.style.display = "none";
    } else {
        x.style.display = "block";
    }
}

function GetReports() {

    var x = document.getElementById("ReportDisplay");
    var y = document.getElementById("StartScanDiv");
    var z = document.getElementById("myDIV");
    var loadspin= document.getElementById('loading');
    if (x.style.display === "block") {
        x.style.display = "none";

    } else {
        x.style.display = "block";
        y.style.display = "none";
        z.style.display = "none";
        loadspin.style.display = 'block';

        var xhttp = new XMLHttpRequest();
        xhttp.open("GET", "/api/generateReports", true);
        xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4 && xhttp.status == 200) {
            //alert("Resp Text : " +xhttp.responseText);
            if (xhttp.responseText)
            {
                var jsobj =JSON.parse(xhttp.responseText);
                var mySite=jsobj.site;
                var myObj=jsobj.site.alerts;
                var txt="";
                txt += "<table  border=1 cellspacing=1 cellpadding=1 ><tr><h4> <FONT COLOR=660000 FACE=Arial SIZE=4.5> <u>Test Details :</u></h4><td width=150 align=left bgcolor=#153E7E><FONT COLOR=#E0E0E0 FACE=Arial SIZE=2.75><b>Execution Date</b></td><td width=150 align=left><FONT COLOR=#153E7E FACE=Arial SIZE=2.75><b>"+jsobj['@generated'];
                txt += "</b></td></tr><tr><td width=150 align=left bgcolor=#153E7E><FONT COLOR=#E0E0E0 FACE=Arial SIZE=2.75><b>Target Application</b></td><td width=150 align=left><FONT COLOR=#153E7E FACE=Arial SIZE=2.75><b>"+mySite['@name'];
                txt += "</b></td></tr><tr><td width=150 align= left  bgcolor=#153E7E><FONT COLOR=#E0E0E0 FACE= Arial  SIZE=2.75><b>Release Version</b></td><td width=150 align= left ><FONT COLOR=#153E7E FACE= Arial  SIZE=2.75><b>"+jsobj['@version'];
                txt += "</b></td></tr></table>";
                txt += "<table width=100% border=1 cellspacing=1 cellpadding=1><tr><h4> <FONT COLOR=660000 FACE=Arial SIZE=4.5> <u>Alert Details :</u></h4>"
                txt += "<tr><td align= center width=10% bgcolor=#153E7E><FONT COLOR=#ffffff FACE= Arial  SIZE=2>AlertID</td><td align= center width=15% bgcolor=#153E7E><FONT COLOR=#ffffff FACE= Arial  SIZE=2>AlertName</td><td align= center width=10% bgcolor=#153E7E><FONT COLOR=#ffffff FACE= Arial  SIZE=2>Risk Level</td><td align= center width=25% bgcolor=#153E7E><FONT COLOR=#ffffff FACE= Arial  SIZE=2>Alert Description</td><td align= center width=25% bgcolor=#153E7E><FONT COLOR=#ffffff FACE= Arial  SIZE=2>Solution</td></tr>";
                for (x in myObj) {
                  //  alert("JsonIndex: " + x + "\JsonValue: " + myObj[x].name);
                    txt += "<tr><td align=center bgcolor=#ffffff><FONT COLOR=#000000 FACE= Arial  SIZE=2>" + myObj[x].pluginid + "</td><td align=center bgcolor=#ffffff><FONT COLOR=#000000 FACE= Arial  SIZE=2>" + myObj[x].name + "</td>"
                    var sFeStatus=myObj[x].riskdesc
                    if(sFeStatus.indexOf("High ")>=0){
                        txt +="<td align=center bgcolor=red><FONT COLOR=#000000 FACE= Arial  SIZE=2>" +sFeStatus + "</td>"
                    }
                    else if(sFeStatus.indexOf("Low ")>=0){
                        txt +="<td align=center bgcolor=yellow><FONT COLOR=#000000 FACE= Arial  SIZE=2>" +sFeStatus + "</td>"
                    }
                    else if(sFeStatus.indexOf("Medium ")>=0){
                        txt +="<td align=center bgcolor=ORANGE><FONT COLOR=#000000 FACE= Arial  SIZE=2>" +sFeStatus + "</td>"
                    }
                    else{
                        txt +="<td align=center bgcolor=yellow><FONT COLOR=#000000 FACE= Arial  SIZE=2>" + sFeStatus + "</td>"
                    }
                    txt +="<td align=center bgcolor=#ffffff><FONT COLOR=#000000 FACE= Arial  SIZE=2>" + myObj[x].desc + "</td><td align=center bgcolor=#ffffff><FONT COLOR=#000000 FACE= Arial  SIZE=2>" + myObj[x].solution + "</td></tr>";
                }
                txt += "</table>"  
                loadspin.style.display = 'none';
                document.getElementById("zapReports").innerHTML = txt;
            }
            else
            {
                loadspin.style.display = 'none';
                document.getElementById("zapReports").innerHTML = "No Reports generated!!!. Please execute zap modes in Security Scan Tab";

            }
                
            }
            else{
             //alert("Error Ready State and Status : " +xhttp.readyState+" : "+xhttp.status); 
            }
            };
        xhttp.setRequestHeader("Content-type", "application/json");
        xhttp.send();
        }
    }

function SaveConfig(){

    var x = document.getElementById("myDIV");
    x.style.display = 'none'
    var loadspin= document.getElementById('loading');
    loadspin.style.display = 'block';
    var SavedMsg= document.getElementById('SavedMsg');
    
    var hostname = document.getElementById("hostname").value;
    var port = document.getElementById("port").value;
    var ApiKey = document.getElementById("ApiKey").value;
    var Inputdata= JSON.stringify({"zaphostname": hostname,"zapport": port,"zapapikey":ApiKey});
    
    var xhttp = new XMLHttpRequest();
    xhttp.open("POST", "/api/zapconfig", true);
    xhttp.onreadystatechange = function() {
    if (xhttp.readyState == 4 && xhttp.status == 200) {
       // alert("Resp Ready State and Status : " +xhttp.readyState+" : "+xhttp.status); 
       loadspin.style.display = 'none';
       x.style.display = 'block'
       SavedMsg.style.display='block';
       document.getElementById("SavedConfigMsg").innerHTML = "Zap Proxy details Saved sucessfully";
    
    }
    else{
        //alert("Error Ready State and Status : " +xhttp.readyState+" : "+xhttp.status); 
    }
  };
    xhttp.setRequestHeader("Content-type", "application/json");
    xhttp.send(Inputdata);
   // var response = JSON.parse(xhttp.responseText);

}

function LaunchZap(){
    
    var x = document.getElementById("myDIV");
    var loadspin= document.getElementById('loading');
    var SavedMsg= document.getElementById('SavedMsg');
    x.style.display = 'none'
    loadspin.style.display = 'block';
    
    var xhttp = new XMLHttpRequest();
    xhttp.open("GET", "/api/launchzap", true);
    xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4 && xhttp.status == 200) {
            loadspin.style.display = 'none';
            x.style.display = 'block'
            SavedMsg.style.display='block';
            document.getElementById("SavedConfigMsg").innerHTML = "Zap Proxy Server Running Now";
        }
        else{
            //document.getElementById('loading').style.display = 'block';
        }
    };
    xhttp.setRequestHeader("Content-type", "application/json");
    xhttp.send();
}

function StartScan(){
    
    var y = document.getElementById("StartScanDiv");
    y.style.display = 'none'
    var ScanMsg= document.getElementById('ScannedMsg');
    var loadspin= document.getElementById('loading');
    loadspin.style.display = 'block';

    var TargetedWebsites = document.getElementById("TargetedWebsites").value;
    var zapoptions='spider'
    if (document.getElementById('spiderradio').checked) {
        zapoptions= 'spider';
    }
    else if (document.getElementById('ascanradio').checked) {
        zapoptions= 'ascan';
    }
    else if (document.getElementById('ajspiderradio').checked) {
        zapoptions= 'ajaxspider';
    }
    else if (document.getElementById('selenradio').checked) {
        zapoptions= 'selenium'
    }

    var Inputdata= JSON.stringify({"application": TargetedWebsites,"zapoption": zapoptions});    
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4 && xhttp.status == 200) {
            loadspin.style.display = 'none';
            y.style.display = 'block'
            document.getElementById("ScannedMsgText").innerHTML = "Zap performed "+zapoptions+" in the Web Appplication :"+TargetedWebsites+" successfully.  Please check the Security alerts in Reports Tab";
            document.getElementById("ScannedMsgText").style.display='block'
            document.getElementById("ErrorMsgText").style.display='none'
            ScanMsg.style.display='block';
            
        }
        else{
           // document.getElementById('loading').style.display = 'block';
        }
    };
    xhttp.open("POST", "/api/executezapproxy", true);
    xhttp.setRequestHeader("Content-type", "application/json");
    xhttp.send(Inputdata);
}
</script>

<!--web socket communication-->
<script src="js/index.js"></script>


</body>

</html>
